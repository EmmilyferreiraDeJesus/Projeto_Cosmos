<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../js/sessao.js"></script>

    <!--Link CSS-->
    <link rel="stylesheet" href="../css/estilo.css">
    <!--Link Google Icons-->
    <link rel="shortcut icon" href="../assets/LOGOTIPO.png" type="image/x-icon">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <title>Cosmos | A Seleção Natural Cosmológica de Lee Smolin</title>
</head>

<!-- validarSessao(), -->

<body onload="atualizarFeed()">

    <!--Container com a imagem principal e header-->
    <div class="container-principal-blog">

        <div class="header">
            <div class="container">

                <p class="email">
                    <span class="material-symbols-outlined">mail</span>
                    <a href="#">emmily.ferreira@spetch.school</a>
                </p>

                <a><img class="logo-blog" src="../assets/LOGOTIPO.png" alt="Logo Cosmos"></a>

                <div class="navbar">
                    <ul>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="#" onclick="limparSessao()">Sair</a></li>
                    </ul>
                </div>
            </div>

            <div class="conteudo-principal-blog">

                <h1>Blog</h1>

            </div>

        </div>

    </div>


    <!--Container da postagem-->
    <div class="container-postagem">

        <div class="postagem">

            <h1>A Seleção Natural Cosmológica de Lee Smolin</h1>
            <p class="data-post-p">
                <span class="material-symbols-outlined icon">calendar_clock</span>
                Abril 19, 2023 ás 08:50
            </p>

            <img src="../assets/cosmologica.png">

            <p> A Seleção Natural Cosmológica é uma hipótese científica formulada pelo físico Lee Smolin para tentar
                explicar a complexidade do universo. Uma tentativa de solucionar um dos maiores mistérios da existência.
                Se as leis e constantes físicas fossem um pouco diferente do que realmente são, a formação da vida seria
                impossível. Ou seja, se a relação de elétrons para prótons, a taxa de expansão do universo, as massas
                relativas das partículas elementares ou o valor de várias “forças físicas” não fossem extremamente
                próximas do que são, as estrelas e moléculas complexas que levam à vida nunca poderiam ter se
                desenvolvido. Muitos chamam essa extraordinária configuração de “ajuste fino”. O problema é, por que
                nosso universo apresenta esse configuração precisamente afinada para permitir a vida?<br> <br>

                Como a seleção natural de Charles Darwin foi o conceito mais poderoso para explicar a complexidade
                biológica, Smolin explorou em seu livro A Vida do Cosmos, uma extensão desse conceito para todo o
                universo, propondo que por efeitos quânticos nos buracos negros (estrelas colapsadas por sua própria
                gravidade, objetos extremamente densos que distorcem o tecido espaço-temporal fazendo com que nem mesmo
                a luz consiga escapar de sua influencia gravitacional) novas regiões do espaço possam surgir, formando
                universos bebês separados de seu universo de origem.<br> <br>

                Nas palavras de Lawrence Rifkin:<br> <br>

                <em>❝As condições extremas dentro de um buraco negro resultam em pequenas variações aleatórias das
                    forças e
                    parâmetros físicos do novo universo. Assim, cada universo bebê possui pequenas diferenças em relação
                    ao
                    universo pai. Devidas às características herdadas, universos com parâmetros mais amigáveis produzirá
                    mais estrelas que um universo hostil. Os parâmetros que vemos hoje são do jeito que são, porque,
                    depois
                    de acumular pouco a pouco parâmetros de gerações de universos anteriores, o resultado é um universo
                    “bom” para a produção de estrelas e vida como conhecemos.❞ (RIFKIN, 2014)[1]</em><br> <br>

                Estrelas são pré-requisito para a vida, pois, a radiação é a fonte última da vida. Sem a luz solar, não
                haveria vida na Terra. A luz solar não é apenas nosso meio de contato com o mundo; em um sentido muito
                real, é a base de nossa existência. Se a diferença entre nós e a matéria inerte é a organização, é a luz
                do Sol que dá a vida, o ímpeto para que a matéria se auto-organize e se transforme em vida, em toda a
                escala, da célula individual até a vida. Além de ser também o fabricante da maior parte dos elementos
                existente, já que é através dos processos termonucleares que ocorrem nas estrelas que elementos químicos
                mais pesados que o hélio surgem.<br> <br>

                <em>❝A primeira coisa para vida é a variedade de átomos que possam se combinar para formar um número
                    muito
                    grande de moléculas de tamanhos, formas e propriedades químicas diferentes. […] Um universo contendo
                    apenas um tipo de átomo seria quase certamente que morto. […] o universo deve conter estrelas. […]
                    Não é
                    uma coincidência que, quando olhamos para cima, vejamos estrelas, do mesmo modo que não é
                    coincidência
                    que, quando olhamos ao nosso redor, vejamos plantas e arvores. Da mesma forma como as plantas
                    produzem o
                    oxigênio que respiramos, são as estrelas que produzem todos os elementos químicos que nós, e as
                    plantas,
                    somos feitos.❞ (SMOLIN, 2004, p.35)[2]</em><br> <br>

            </p>

            <img src="../assets/buraco_negro_2.png">

            <p>
                Em síntese a hipótese de Smolin sugere que os buracos negros podem “dar à luz” a novas regiões do
                espaço-tempo cujas leis sofrem uma sutil “mutação” no processo. A singularidade inicial de nosso big
                bang é assim explicada em termos de um “salto” quântico de um universo anterior. O argumento relativo às
                leis, entretanto, é essencialmente darwiniano: aqueles universos com leis condizentes à geração de
                buracos negros (estrelas em seu estágio final) terão muitas progênies enquanto aqueles com leis
                dramaticamente diferentes não. A sucessão de universos pai e seus descendentes necessariamente se
                desdobra no tempo, implicando que as leis evoluem e se modificam.<br> <br>
            </p>


            <div class="curtida-postagem">
                <p class="likes">
                    <i id="botaoCurtir" onclick="curtir()" class="fa-solid fa-thumbs-up fa-2x"></i>
                    <span id="numero_curtidas"></span>
                </p>
            </div>

            <div class="comentarios-postagem">

                <h3>Comentarios</h3>

                <div id="comentario">
                    <div id="feed_container" class="feed-container"></div>
                </div>

                <form id="form_postagem" method="post" onsubmit="return publicar()">

                    <h3>Deixe um comentário</h3>

                    <textarea id="textarea_descricao" name="descricao" maxlength="300"></textarea>

                    <button>Enviar</button>
                    <div id="erro_comentario"></div>

                </form>

            </div>

        </div>

    </div>

    <!--Rodapé-->
    <div class="rodape">
        <a><img src="../assets/LOGOTIPO.png" alt="Logo Cosmos"></a>
        <div class="rodape-links">
            <div class="links">
                <a href="#"><img src="../assets/facebook.png" alt="facebook"></a>
                <a href="#"><img src="../assets/instagram.png" alt="instagram"></a>
                <a href="#"><img src="../assets/twitter.png" alt="twiter"></a>
                <p>
                    <a href="blog.html">Blog</a>
                </p>
                <p>© 2023 Cosmos. All Rights Reserved</p>
            </div>
        </div>
    </div>




    <script src="https://kit.fontawesome.com/d4c069e090.js" crossorigin="anonymous"></script>

</body>

</html>
<script>

    var idPost = 5;
    var idUsuario = sessionStorage.ID_USUARIO;


    function limparFormulario() {
        document.getElementById("form_postagem").reset();
    }

    function verificarCurtida(idUsuario, idPost) {
        fetch(`/comentarios/verificarCurtida/${idUsuario}/${idPost}`)

        console.log('Verificar Curtidas' + idPost)

            .then(function (resposta) {
                if (resposta.ok) {
                    return resposta.json();

                } else {
                    throw new Error('Erro ao verificar curtida');
                }
            })
            .then(function (resposta) {
                console.log('Resultado da curtida', resposta.curtiu);
                sessionStorage.setItem(`CURTIDA_POST${idPost}`, resposta.curtiu);
            })
            .catch(function (erro) {
                console.error('Erro:', erro);
            });
    }


    function curtir() {
        var jaCurtiu = sessionStorage.getItem(`curtida_${idPost}`);

        if (jaCurtiu) {
            alert("Você já curtiu esta postagem!");
        } else {
            // Antes de enviar a solicitação, verifica se o usuário já curtiu
            fetch(`/comentarios/verificarCurtida/${idUsuario}/${idPost}`)
                .then(function (resposta) {
                    if (resposta.ok) {
                        return resposta.json();
                    } else {
                        throw new Error('Erro ao verificar curtida');
                    }
                })
                .then(function (resposta) {
                    if (!resposta.curtiu) {
                        // Se o usuário ainda não curtiu, então envie a solicitação de curtir
                        return fetch(`/comentarios/curtir/${idUsuario}/${idPost}`, {
                            method: "post",
                            headers: {
                                "Content-Type": "application/json"
                            },
                        });
                    } else {
                        alert("Você já curtiu este post!");
                        return Promise.reject('Usuário já curtiu');
                    }
                })
                .then(function (resposta) {
                    if (resposta.ok) {
                        alert("Post curtido");
                        window.location = "/dashboard/post5.html";
                        console.log("idCurtida realizada com sucesso");

                        sessionStorage.setItem(`CURTIDA_POST${idPost}`, true);

                        // Chama a função verificarCurtida para atualizar o estado no sessionStorage
                        verificarCurtida(idUsuario, idPost);

                        // finalizarAguardar();
                    } else if (resposta.status == 404) {
                        window.alert("Deu 404!");
                    } else {
                        throw new Error("Houve um erro ao tentar realizar a curtida! Código da resposta: " + resposta.status);
                    }
                })
                .catch(function (erro) {
                    console.log(`#ERRO: ${erro}`);
                    // finalizarAguardar();
                });

            return false;
        }
    }

    function publicar() {

        var corpo = {
            descricao: form_postagem.descricao.value
        }

        if (!corpo.descricao.trim()) { // Remove espaços em branco no início e no fim

            // Se a descrição estiver vazia ou nula, exibir mensagem de erro e não enviar o formulário
            erro_comentario.innerHTML = "O comentário não pode ser vazio";
            return false;
        }

        fetch(`/comentarios/publicar/${idUsuario}/${idPost}`, {
            method: "post",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(corpo)
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                window.location = "/dashboard/post5.html";
                console.log("idPost em publicar:", idPost);

                limparFormulario();
                // finalizarAguardar();
            } else if (resposta.status == 404) {
                window.alert("Deu 404!");
            } else {
                throw ("Houve um erro ao tentar realizar o comentario! Código da resposta: " + resposta.status);
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            // finalizarAguardar();
        });

        return false;

    }

    function atualizarFeed() {
        fetch(`/comentarios/listar/${idPost}`).then(function (resposta) {

            console.log('Atualizar' + idPost);

            if (resposta.ok) {
                if (resposta.status == 204) {
                    var feed = document.getElementById("feed_container");
                    var mensagem = document.createElement("span");
                    mensagem.innerHTML = "Nenhum comentario foi feito";
                    mensagem.classList.add("mensagem");
                    feed.appendChild(mensagem);
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    var feed = document.getElementById("feed_container");
                    feed.innerHTML = "";
                    for (let i = 0; i < resposta.length; i++) {
                        var publicacao = resposta[i];

                        // criando e manipulando elementos do HTML via JavaScript
                        var divPublicacao = document.createElement("div");
                        var spanNome = document.createElement("span");
                        var divDescricao = document.createElement("div");

                        spanNome.innerHTML = `<img width="60px" heigth="60px" style="border-radius: 50%;" src="${publicacao.imagem}"> ${publicacao.nome}`;
                        divDescricao.innerHTML = publicacao.descricao;

                        divPublicacao.className = "publicacao";
                        spanNome.className = "publicacao-nome";
                        divDescricao.className = "publicacao-descricao"

                        divPublicacao.appendChild(spanNome);
                        divPublicacao.appendChild(divDescricao);
                        feed.appendChild(divPublicacao);
                    }

                    // finalizarAguardar();
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
            // finalizarAguardar();
        });

        // Incluir contagem de curtidas
        fetch(`/comentarios/contarCurtidas/${idPost}`)
            .then(function (resposta) {
                if (resposta.ok) {
                    return resposta.json();
                } else {
                    throw new Error('Erro ao contar curtidas');
                }
            })
            .then(function (resposta) {
                // Exibir a contagem de curtidas na interface do usuário
                var numeroCurtidas = resposta.numeroCurtidas;
                var numeroCurtidasElement = document.getElementById("numero_curtidas");
                numeroCurtidasElement.innerHTML = numeroCurtidas;
            })
            .catch(function (erro) {
                console.error('Erro:', erro);
            });

    }


</script>